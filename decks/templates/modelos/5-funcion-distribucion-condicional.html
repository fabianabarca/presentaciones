{% extends 'decks.html' %}

{% load static %}

<!-- Título -->
{% block title %}5-funcion-distribucion-condicional{% endblock %}

<!-- Referencia: https://www.overleaf.com/project/5c37657e3d7cdc5c90609dc5  -->

<!-- Configuraciones específicas del <head> -->
{% block head %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Agregar KaTex de reveal Revealjs -->
<script src="plugin/math/math.js"></script>
<script>
  Reveal.initialize({ plugins: [ RevealMath.KaTeX ] });
</script>
{% endblock %}
{% block content %}

<!-- SECCIÓN 0 -->
<section>
    <h1 class="display-1">
        Funciones de distribución condicionales de una variable aleatoria
    </h1>
</section>

<!-- Portada y descripción -->
<section>
    <p>
        Para las variables aleatorias también es posible modelar probabilidades de eventos condicionados a la ocurrencia de otros eventos. Esta relación de interdependencia está sujeta al experimento o fenómeno particular y una buena cantidad de situaciones reales obedecen a un modelado condicional como este.
    </p>
</section>

<!-- Función acumulativa condicional -->
<section>
    <section>
        <h2>Función acumulativa condicional, $F_X(x \mid B)$</h2>
    </section>

    <section>
        <p>
            La función acumulativa condicional es idéntica en sus propiedades a la función acumulativa ordinaria, 
            excepto que ahora está implícita la ocurrencia de un evento anterior que modifica su distribución de 
            probabilidades.
        </p>
    </section>

    <!-- Diapositiva 1 -->
    <section>
    <h3>Función acumulativa condicional I</h3>
    <blockquote>
        Sea $A$ el evento $\{ X \leq x\}$ de la variable aleatoria $X$. La probabilidad $P\left( X \leq x \mid B \right)$ se define como la <em>función acumulativa condicional de $X$</em>, que se denota $F_{X}(x \mid B)$,
        <p>
            \begin{equation}
            P(A \mid B) = P\left( X \leq x \mid B \right) \triangleq F_{X}(x \mid B)
            \end{equation}

            \begin{equation}
            F_{X}(x \mid B) = \frac{P\left[ (X \leq x) \cap B \right]}{P(B)} = \frac{P(A \cap B)}{P(B)} = P(A \mid B)
            \end{equation}
        </p>
    </blockquote>
    <p>
        Aplicable a variables aleatorias discretas, continuas o mixtas. 
    </p>
    </section>

    <!-- Diapositiva 2 -->
    <section>
    <h3>Función acumulativa condicional II</h3>
    <p>
        El evento conjunto $\{ X \leq x\} \cap B$ consiste de los resultados $s$ tales que $X(s) \leq x$ y $s \in B$.
    </p>
    <p>Figura (Falta)</p>
    <p>
        \begin{equation*}
            \{ s : X(s) \leq x \text{ and } s \in B \} = \{ s_1, s_2, s_3 \}
        \end{equation*}
    </p>
    </section>

    <!-- Diapositiva 3 -->
    <section>
        <h3>Propiedades de la función acumulativa condicional</h3>
        <p>Todas las propiedades de las funciones acumulativas ordinarias se aplican a $F_{X}(x \mid B)$:</p>
        <div class="row">
            <div class="col-md-6">
                <ul>
                    <i class="bi bi-1-circle-fill"></i> Similar a \(P(\emptyset) = 0\): \[F_{X}(-\infty \mid B) = 0\]
                    <i class="bi bi-2-circle-fill"></i> Similar a \(P(S) = 1\): \[F_{X}(\infty \mid B) = 1\]
                    <i class="bi bi-3-circle-fill"></i> Es una probabilidad: \[0 \leq F_{X}(x \mid B) \leq 1\]
                    <i class="bi bi-4-circle-fill"></i> Es no decreciente: \[F_{X}(x_1 \mid B) \leq F_{X}(x_2 \mid B) \text{ si } x_1 < x_2\]
                </ul>
            </div>
            <div class="col-md-6">
                <ul>
                    <i class="bi bi-5-circle-fill"></i> Probabilidad de un segmento:
                        <br>
                        \[
                        P\{ x_1 < X \leq x_2 \mid B\} = F_{X}(x_2 \mid B) - F_{X}(x_1 \mid B)
                        \]
                    <i class="bi bi-6-circle-fill"></i> Continuidad por la derecha: \(F_{X}(x^{+} \mid B) = F_{X}(x \mid B)\)
                </ul>
            </div>
        </div>
    </section>
    

    <!-- Diapositiva 4 -->
    <section>
        <h3>Ejemplo de un evento B discreto I</h3>
        <p>
            Si solo existen los resultados elementales $B = \{ b_1, b_2, b_3 \}$ entonces puede existir una función acumulativa $F_X(x \mid B)$ con tres parámetros distintos, a saber
        </p>
        <p>Figura (Falta)</p>
    </section>

    <!-- Diapositiva 5 -->
    <section>
        <h3>Ejemplo de tres lanzamientos de monedas I</h3>
        <blockquote>
            Considere el experimento de tres lanzamientos de moneda (o el lanzamiento de tres monedas, que es equivalente porque son eventos independientes). Sea la VA $X$ "el número total de coronas" y sea el evento $B = \{ \text{más coronas que escudos} \}$. Determine y esboce $F_X(x \mid B)$.
        </blockquote>
        <p>
            El lanzamiento de monedas tiene ocho resultados distintos ($2^3$) .El evento $B$ es:

            \[
            B = \{ CCC, CCE, CEC, ECC \}
            \]

            con $P(B) = \displaystyle\frac{1}{2}$. 
        </p>
    </section>

    <!-- Diapositiva 6 -->
     <section>
        <h3></h3>
        <p>
            <p>Considere el evento conjunto \( \{X \leq x\} \cap B \) y la definición</p>

            <p>
            \[ 
            F_{X}(x \mid B) = \frac{P\left( \{X \leq x\} \cap B \right)}{P(B)}
            \]
            </p>
            
            <p>
            Si \(X\) es "el número total de coronas" y \(B = \{\) más coronas que escudos \(\}\), entonces
            </p>
            
            <div class="table-responsive">
              <table class="table table-bordered table-hover">
                <thead class="thead-dark">
                  <tr>
                    <th scope="col">\(x\)</th>
                    <th scope="col">\( \{X \leq x\} \cap B \)</th>
                    <th scope="col">\( P\left( \{X \leq x\} \cap B \right) \)</th>
                    <th scope="col">\( F_{X \mid B} \)</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>0</td>
                    <td>\(\{ EEE \} \cap B = \emptyset\)</td>
                    <td>0</td>
                    <td>0</td>
                  </tr>
                  <tr>
                    <td>1</td>
                    <td>\(\{ CEE,ECE,EEC,EEE \} \cap B = \emptyset\)</td>
                    <td>0</td>
                    <td>0</td>
                  </tr>
                  <tr>
                    <td>2</td>
                    <td>\(\{ CCE, CEC, ECC \}\)</td>
                    <td>\(\frac{3}{8}\)</td>
                    <td>\(\frac{3}{4}\)</td>
                  </tr>
                  <tr>
                    <td>3</td>
                    <td>\(\{ CCC, CCE, CEC, ECC \} = B\)</td>
                    <td>\(\frac{4}{8}\)</td>
                    <td>1</td>
                  </tr>
                </tbody>
              </table>
            </div>            
        </p>
     </section>
    
    <!-- Diapositiva 7 -->
    <section>
        <p>Figura (Falta)</p>
    </section>

    <!-- Diapositiva 8 -->
    <section>
        <h3>Ejemplo de tres lanzamientos de monedas IV</h3>
        <p>
            Entonces,

            \[
            F_X(x \mid B) = 
            \begin{cases}
            0 	& x<2 \\
            3/4	& 2 \leq x < 3 \\
            1	& 3 \leq x
            \end{cases}
            \]

            mientras que,

            \[
            F_X(x) = 
            \begin{cases}
            0 	& x<0 \\
            1/8	& 0 \leq x < 1 \\
            1/2	& 1 \leq x < 2 \\
            7/8	& 2 \leq x < 3 \\
            1	& 3 \leq x
            \end{cases}
            \]
        </p>
    </section>

    <!-- Diapositiva 9 -->
    <section>
        <h3>Ejemplo de tres lanzamientos de monedas V</h3>
        <p>Figura (Falta)</p>
        <p>
            $X$ es "el número total de coronas" y $B = \{ \text{más coronas que escudos} \}$
        </p>
    </section>

    <!-- Diapositiva 9 -->
    <section>
        <h3>Casos especiales de la función acumulativa condicional I</h3>
        <blockquote>
            Sea el evento $B = \{X \leq b\}$ (una semirrecta), donde $b$ es algún número real $-\infty < b < \infty$. Entonces, 

            \begin{equation*}
            \begin{aligned}
            F_{X}(x \mid X \leq b) & \triangleq P\left( X \leq x \mid X \leq b\right) \\ 
            & = \frac{P\left( \{X \leq x\} \cap \{X \leq b\}\right)}{P\left( X \leq b \right)}
            \end{aligned}
            \end{equation*}

            donde $P\left( X \leq b \right) \neq 0$. 
        </blockquote>
        <p>Dos situaciones pueden considerarse, una es donde $X \geq b$ y la otra donde $X < b$. </p>
    </section>

    <!-- Diapositiva 10 -->
    <section>
    <h3>Casos especiales de la función acumulativa condicional II</h3>
    <p>
        Si $b \leq x$ el evento $B = \{ X \leq b \}$ es un subconjunto del evento $A = \{ X \leq x \}$, de modo que $\{ X \leq x \} \cap \{ X \leq b \} = \{ X \leq b \}$.
    </p>
    <p>Figura (Falta)</p>
    <p>Luego, 

        \begin{equation*}
        \begin{aligned}
        F_{X}(x \mid X \leq b) 	& = \frac{P( \{X \leq x\} \cap \{X \leq b\})}{P(X \leq b)} \\
                                    & = \frac{P( X \leq b )}{P( X \leq b )} = 1
        \end{aligned}
        \end{equation*}
        
        para $x \geq b$. </p>
    </section>

    <!-- Diapositiva 11 -->
    <section>
        <h3>Casos especiales de la función acumulativa condicional III</h3>
        <p>
            Si $b > x$] el evento $A = \{ X \leq x \}$ es un subconjunto del evento $B = \{X \leq b\}$, de modo que $\{ X \leq x \} \cap \{ X \leq b \} = \{ X \leq x \}$.
        </p>
        <p>Figura (Falta)</p>
        <p>
            Entonces,

            \begin{equation*}
            \begin{aligned}
            F_{X}(x \mid X \leq b) 	& = \frac{P( \{X \leq x\} \cap \{X \leq b\})}{P(X \leq b)} \\
                                    & = \frac{F_{X}(x)}{F_{X}(b)}
            \end{aligned}
            \end{equation*}

            para $x < b$. 
        </p>
    </section>

     <!-- Diapositiva 12 -->
    <section>
    <h3>Casos especiales de la función acumulativa condicional IV</h3>
    <blockquote>
        \begin{equation}
        F_{X}(x \mid X \leq b) = 
        \begin{cases}
            \displaystyle\frac{F_{X}(x)}{F_{X}(b)} & x < b \\
            1                         & x \geq b
        \end{cases}
        \end{equation}

        cuando $B = \{X \leq b\}$, donde $b$ es algún número real $-\infty < b < \infty$.
    </blockquote>
    </section>

    <!-- Diapositiva 13 -->
    <section>
        <h3>Ejemplo de la caída de un paracaidista I</h3>
        <blockquote>
            <p>
                La distancia de yerro radial de aterrizajes por paracaídas medida desde el centro
                del blanco, es una variable aleatoria Rayleigh con b = 800 m2 y a = 0.
                El blanco es un círculo de radio 50 metros con un ojo de buey de radio 10 metros.
                Encuéntrese la probabilidad de que un paracaidista acierte en el ojo del buey si el
                aterrizaje es dentro del blanco.
            </p>
        </blockquote>
        <p>Figura (Falta)</p>
    </section>

    <!-- Diapositiva 14 -->
    <section>
        <h3>Ejemplo de la caída de un paracaidista II</h3>
        <p>
            \[
            F_{X}(x) = \left[ 1 - \exp\left( -\frac{x^2}{800}\right) \right]u(x)
            \]
        </p>
        <p>Figura (Falta)</p>
    </section>

    <!-- Diapositiva 15 -->
    <section>
        <h3>Ejemplo de la caída de un paracaidista III</h3>
        <p>
            La probabilidad $P($ dar en el ojo de buey $\mid$ aterrizaje da en el blanco $)$ es:

            \begin{equation*}
            \begin{aligned}
            P(\{X \leq 10\}\mid \{X \leq 50\}) & = \\
            \frac{P(\{ X \leq 10\} \cap \{X \leq 50\})}{P(\{X \leq 50\})} & = \frac{P(\{X\leq 10\})}{P(\{X\leq 50\})} \\
            & = \frac{F_{X}(10)}{F_{X}(50)} \\
            & = \frac{1 - e^{-100/800}}{1 - e^{-2500/800}} \\
            & = 0.1229
            \end{aligned}
            \end{equation*}

            La precisión del paracaidista es tal que cerca de un $12.29\%$ de aterrizajes que dan en el blanco, serán dentro del ojo de buey.
        </p>
    </section>

    <!-- Diapositiva 16 -->
    <section>
    <h3>La función acumulativa de probabilidad total</h3>
    <p>
        Cuando existe una partición $\{ A_i \}$ de la cual depende otro evento $B = \{ X \leq x \}$, se puede crear una probabilidad total condicional de la forma en que se hizo anteriormente. 
        
        <p>Ahora,</p>

        \begin{equation}
        F_X(x) = \sum_{i=1}^{N} F_X(x \mid A_i) P(A_i)
        \end{equation}

        Esta ecuación describe a $F_X(x)$ como la <em>suma ponderada</em> de funciones de distribución condicionales.
    </p>
    </section>

    <!-- Diapositiva 17 -->
    <section>
        <h3>Ejemplo de chips de memoria defectuosos I Probabilidad total condicional</h3>
        <p>
            En la manufactura automatizada de chips de memoria de computadoras, la compañía <em>Evil Corp.</em> produce y vende un chip defectuoso por cada cinco chips buenos. Los chips defectuosos (CD) tienen un tiempo de fallo $X$ que obedece la CDF

            \[
            F_X(x \mid CD) = (1 - e^{-x/2})u(x) \qquad (x \text{ en meses})
            \]

            mientras que el tiempo de fallo de los chips buenos (CB) sigue la función de distribución de probabilidad acumulativa

            \[
            F_X(x \mid CB) = (1 - e^{-x/10})u(x) \qquad (x \text{ en meses})
            \]
        </p>
    </section>

    <!-- Diapositiva 18 -->
    <section>
        <p>Figura (Falta)</p>
    </section>

    <!-- Diapositiva 19 -->
    <section>
        <h3>Ejemplo de chips de memoria defectuosos III</h3>
        <blockquote>
            Visualmente, los chips malos son irreconocibles de entre los buenos. Un chip es comprado. ¿Cuál es la probabilidad de que el chip fallará antes de seis meses de uso?
        </blockquote>
        <p>
            La distribución de probabilidad \textit{incondicional} para el chip es

            \[
            F_X(x) = F_X(x \mid CB) P(CB) + F_X(x \mid CD) P(CD)
            \]

            donde $P(CB)$ y $P(CD)$ son las probabilidades de seleccionar un chip bueno y uno malo, respectivamente. Entonces

            \[
            \begin{aligned}
            F_X(6) 	&= \left( 1 - e^{-0.6} \right) \frac{5}{6} + \left( 1 - e^{-3} \right) \frac{1}{6} \\
                    &= 0.158 + 0.376 = 0.534
            \end{aligned}
            \]
        </p>
    </section>

    <!-- Diapositiva 20 -->
    <section>
        <p>Figura (Falta)</p>
    </section>
</section>

<!-- Función de densidad condicional -->
<section>
    <section>
        <h2>Función de densidad condicional, $f_X(x \mid B)$</h2>
    </section>

    <!-- Diapositiva 1 -->
    <section>
        <p>La función de densidad condicional es una nueva función de densidad, de propiedades idénticas, que asume la existencia de un evento condicionante. En la práctica, al igual que la función acumulativa, puede servir para modelar los distintos escenarios ante diferentes cursos de acción (decisiones, sucesos, otros eventos aleatorios, etc.).</p>
    </section>

    <!-- Diapositiva 2 -->
    <section>
        <h3>Función de densidad condicional</h3>
        <p>
            De manera similar a la función de densidad ordinaria (o incondicional), 

            \begin{equation}
            f_{X}(x \mid B) = \frac{\mathsf{d}}{\mathsf{d}x}F_{X}(x \mid B)
            \end{equation}

            Si $F_{X}(x \mid B)$ contiene discontinuidades tipo escalón, como cuando $X$ es una variable aleatoria discreta o mixta, habrá funciones impulso en $f_{X}(x \mid B)$ a causa de las derivadas en las discontinuidades. 
        </p>
    </section>

    <!-- Diapositiva 3 -->
    <section>
        <h3>Función de densidad condicional</h3>
        <p>Todas las propiedades de las funciones de densidad ordinarias se aplican a $f_{X}(x \mid B)$:</p>
        <div class="row">
            <div class="col-md-6">
              <ul>
                <li><i class="bi bi-1-circle-fill"></i> Siempre positivo: \[ f_{X}(x \mid B) \geq 0 \]</li>
                <li><i class="bi bi-2-circle-fill"></i> El área bajo la curva es unitaria: \( \displaystyle \int_{-\infty}^{\infty}f_{X}(x \mid B)~\mathsf{d}x = 1 \)</li>
              </ul>
            </div>
            <div class="col-md-6">
              <ul>
                <li><i class="bi bi-3-circle-fill"></i> Probabilidad en un intervalo:
                  <div> 
                    \[ \displaystyle P\{x_1 < X \leq x_2 \mid B\} = \int_{x_1}^{x_2}f_{X}(x \mid B)~\mathsf{d}x \]
                  </div>
                </li>
                <li><i class="bi bi-4-circle-fill"></i> Función acumulativa a partir de función de densidad:
                  <div>
                    \( \displaystyle F_{X}(x \mid B) = \int_{-\infty}^{x}f_{X}(v \mid B)~\mathsf{d}v \)
                  </div>
                </li>
              </ul>
            </div>
          </div>          
    </section>

    <!-- Diapositiva 4 -->
    <section>
        <h3>Ejemplo del primer cliente de una tienda I</h3>
        <p>
            Sea $H$ una variable aleatoria que representa la hora a la que llega el primer cliente a un comercio particular. 
            Su distribución cambia según sea el día $D$ de la semana. La función $f_H(h \mid D)$ es una distribución normal con los siguientes 
            parámetros:
        </p>
        <p>
            \begin{equation*}
            f_H(h \mid D) = \frac{1}{\sqrt{2\pi\sigma^2}} e^{- \frac{\left(h - \mu \right)^2}{2\sigma^2}} \quad \text{con}
            \begin{cases}
                \mu = 8, \sigma^2 = 4 & \text{si } D = \text{días laborales} \\
                \mu = 12, \sigma^2 = 4 & \text{si } D = \text{fines de semana} \\
                \mu = 16, \sigma^2 = 4 & \text{si } D = \text{feriados} \\
            \end{cases}
            \end{equation*}
        </p>
    </section>

    <!-- Diapositiva 6 -->
     <section>
        <p>Figura (Falta)</p>
     </section>
</section>


<!-- Gráficos de Chart.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
<script src="{% static 'js/p15.js' %}"></script>

{% endblock %}

{% block websocket %}
{% if role == "presenter" %}
<script>
    const wsRouteTx = 'wss://' + window.location.host + '/ws/deck/slider/p4/';
    const deckSocket = new WebSocket(wsRouteTx);

    // Registrar la conexión abierta
    deckSocket.onopen = function (event) {
        console.log('Conexión WebSocket abierta exitosamente como presentador en ' + wsRouteTx);
    };

    Reveal.on('slidechanged', event => {
        deckSocket.send(JSON.stringify({
            'indexh': event.indexh,
            'indexv': event.indexv
        }));
    });
</script>
{% else %}
<script>
    const wsRouteRx = 'wss://' + window.location.host + '/ws/deck/slider/p4/';
    const deckSocket = new WebSocket(wsRouteRx);

    // Registrar la conexión abierta
    deckSocket.onopen = function (event) {
        console.log('Conexión WebSocket abierta exitosamente como cliente en ' + wsRouteRx);
    };

    deckSocket.onmessage = function (event) {
        const data = JSON.parse(event.data);
        Reveal.slide(data.message.indexh, data.message.indexv);
    };
</script>
{% endif %}
{% endblock %}